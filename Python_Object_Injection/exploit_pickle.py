import cPickle as pickle 


filename 		= "pickle_data.txt"
code 			= "code.txt"

class simpleApp(object):
	
	def secureApp(self, code):

		self.code = code

		self.readin 		= open(code, "r")
		self.readin_data	= self.readin.read()

		self.done 	= pickle.dumps(self.readin_data)
		#self.workDone =  pickle.loads(self.done)

	def write_into(self, filename, pickle_data):
		self.writeinto = open(filename, "w")
		self.writeinto.write(pickle_data)
		print "Writing pickle data into the file.."
		self.writeinto.close()

	def read_into(self, filename):
		self.filename = filename
		self.readinto = open(filename, "r")
		self.ret_data = self.readinto.read()
		print "\n\n"
		print "Pickled data: \n\n"
		print self.ret_data


# calling the app
app = simpleApp()
############################

# calling the vulnerable method .. 
app.secureApp(code)
pickle_data = app.done
############################

# calling the pickle data write method .. 
app.write_into(filename, pickle_data)
############################################

# calling the read pickle data method .. 
app.read_into(filename)
###########################################